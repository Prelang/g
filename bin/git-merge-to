#!/bin/zsh

_branch_destination=$1
_branch_current=`git-branch-current`

if [[ -z $_branch_destination ]] ; then
  echo "fatal: No destination branch supplied."
  return 1
fi

prompt "Are you sure you want to merge '$_branch_current' into '$_branch_destination'?" || exit 1

git checkout $_branch_destination || exit 1
git merge $_branch_current || exit 1
git checkout $_branch_current || exit 1

echo "Success. Merged '$_branch_current' into '$_branch_destination' and returned to '$_branch_current'"

